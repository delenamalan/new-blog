<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Nine things you need to remember when using Composer | Delena Malan</title>
    <meta name="generator" content="VuePress 1.5.3">
    <link rel="icon" href="/logo-small.png">
    <meta name="description" content="Delena Malan">
    <link rel="preload" href="/assets/css/0.styles.f0371090.css" as="style"><link rel="preload" href="/assets/js/app.7a72154f.js" as="script"><link rel="preload" href="/assets/js/3.f60f5d55.js" as="script"><link rel="preload" href="/assets/js/1.882304ba.js" as="script"><link rel="preload" href="/assets/js/18.51b8d96c.js" as="script"><link rel="preload" href="/assets/js/8.dc2fa637.js" as="script"><link rel="prefetch" href="/assets/js/10.ff781af4.js"><link rel="prefetch" href="/assets/js/11.7aba05ca.js"><link rel="prefetch" href="/assets/js/12.0117c602.js"><link rel="prefetch" href="/assets/js/13.81d7c8db.js"><link rel="prefetch" href="/assets/js/14.f83f74ba.js"><link rel="prefetch" href="/assets/js/15.a31ff00d.js"><link rel="prefetch" href="/assets/js/16.6998f877.js"><link rel="prefetch" href="/assets/js/17.57186838.js"><link rel="prefetch" href="/assets/js/19.3b66d550.js"><link rel="prefetch" href="/assets/js/20.be4a9d7e.js"><link rel="prefetch" href="/assets/js/21.4b247413.js"><link rel="prefetch" href="/assets/js/22.6afec913.js"><link rel="prefetch" href="/assets/js/23.5ba5a209.js"><link rel="prefetch" href="/assets/js/24.ae7929ce.js"><link rel="prefetch" href="/assets/js/4.c819f313.js"><link rel="prefetch" href="/assets/js/5.e6b5b41c.js"><link rel="prefetch" href="/assets/js/6.9e30c69c.js"><link rel="prefetch" href="/assets/js/7.fc8e21eb.js"><link rel="prefetch" href="/assets/js/9.154ec9e7.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f0371090.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo-small.png" alt="Delena Malan" class="logo"> <span class="site-name can-hide">Delena Malan</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://gist.github.com/delenamalan/4ae9986977e220fccdf665653db2b98c#file-delena-malan-cv-pdf" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CV
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://gist.github.com/delenamalan/4ae9986977e220fccdf665653db2b98c#file-delena-malan-cv-pdf" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CV
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Nine things you need to remember when using Composer</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/2019/composer.html#_1-remember-the-difference-between-composer-install-and-composer-update" class="sidebar-link">1. Remember the difference between composer install and composer update</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/2019/composer.html#_1-1-tldr-1" class="sidebar-link">1.1 TLDR 1</a></li><li class="sidebar-sub-header"><a href="/2019/composer.html#_1-2-tldr-2" class="sidebar-link">1.2 TLDR 2</a></li><li class="sidebar-sub-header"><a href="/2019/composer.html#_1-3-longer-explanation" class="sidebar-link">1.3 Longer explanation</a></li></ul></li><li><a href="/2019/composer.html#_2-never-run-composer-as-sudo-root" class="sidebar-link">2. Never run Composer as sudo/root</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/2019/composer.html#_3-packagist-is-a-better-place-to-find-packages-than-google" class="sidebar-link">3. Packagist is a better place to find packages than Google</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/2019/composer.html#_4-never-modify-anything-inside-the-vendor-folder" class="sidebar-link">4. Never modify anything inside the vendor folder</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/2019/composer.html#_5-you-should-almost-always-run-composer-install-after-changing-to-another-branch-or-pulling-from-a-remote-branch" class="sidebar-link">5. You should (almost) always run composer install after changing to another branch or pulling from a remote branch</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/2019/composer.html#_6-always-commit-your-composer-lock-file" class="sidebar-link">6. Always commit your composer.lock file</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/2019/composer.html#_7-composer-require-might-not-always-be-your-friend" class="sidebar-link">7. composer require might not always be your friend</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/2019/composer.html#_8-keep-the-composer-versions-documentation-close-by-to-refresh-your-understanding-of-package-version-constraints" class="sidebar-link">8. Keep the Composer versions documentation close by to refresh your understanding of package version constraints</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/2019/composer.html#_9-lastly-run-composer-self-update-once-in-a-while" class="sidebar-link">9. Lastly, run composer self-update once in a while</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="nine-things-you-need-to-remember-when-using-composer"><a href="#nine-things-you-need-to-remember-when-using-composer" class="header-anchor">#</a> Nine things you need to remember when using Composer</h1> <div class="post-date" data-v-2152cbad>
  Sun Mar 24 2019
</div> <p>When I started using <a href="https://getcomposer.org/" target="_blank" rel="noopener noreferrer">Composer<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> I hardly noticed I was using it until it gave me problems. Now that I've used Laravel for a while, I'm realising how much I've been neglecting Composer! Composer can be super handy and easy to use once you've learned a few of its tricks. Here are a few of the things that help me work more effectively with Composer:</p> <h2 id="_1-remember-the-difference-between-composer-install-and-composer-update"><a href="#_1-remember-the-difference-between-composer-install-and-composer-update" class="header-anchor">#</a> 1. Remember the difference between <code>composer install</code> and <code>composer update</code></h2> <p>This is probably the most important concept you need to understand about Composer. On the surface <code>composer install</code> and <code>composer update</code> look very similar. Both can modify the packages and/or their versions in your <code>vendor</code> folder. However, they have some subtle though very important differences. Here are three different explanations to help you remember their differences:</p> <h3 id="_1-1-tldr-1"><a href="#_1-1-tldr-1" class="header-anchor">#</a> 1.1 TLDR 1</h3> <p>Run <code>composer install</code> when you first create or clone a project, after you've switched to another branch or pulled changes from a remote. Run <code>composer update</code> when you want to install new requirements or update your current dependencies to their latest available versions.</p> <h3 id="_1-2-tldr-2"><a href="#_1-2-tldr-2" class="header-anchor">#</a> 1.2 TLDR 2</h3> <p>Run <code>composer install</code> when your <code>composer.lock</code> file has changed or when you don't have a <code>composer.lock</code> file. Run <code>composer update</code> when the <code>composer.json</code> file has changed or when you want to update your dependencies to their latest available versions.</p> <h3 id="_1-3-longer-explanation"><a href="#_1-3-longer-explanation" class="header-anchor">#</a> 1.3 Longer explanation</h3> <p><code>composer install</code> lets you install your initial set of dependencies when no <code>composer.lock</code> file exists. It uses your <code>composer.json</code> file to resolve a set of compatible package versions and installs them into the <code>vendor</code> directory. It will create a <code>composer.lock</code> file which would contain the exact package versions that it has installed.</p> <p>When the <code>composer.lock</code> file exists, <code>composer install</code> ignores the <code>composer.json</code> file and simply installs the exact same packages and versions that the file contains. Even if your <code>composer.json</code> file contains new package dependencies Composer will ignore them. That is where <code>composer update</code> comes in...</p> <p><code>composer update</code> basically does the same that <code>composer install</code> did when there were no <code>composer.lock</code> file yet. In fact, this block in the Composer <a href="https://github.com/composer/composer/blob/master/src/Composer/Installer.php#L184" target="_blank" rel="noopener noreferrer">source<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> shows us that it is actually an &quot;update&quot; that is being done when no <code>composer.lock</code> file exists:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// Force update if there is no lock file present</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">update</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">locker</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">isLocked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">update</span> <span class="token operator">=</span> <span class="token boolean constant">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>composer update</code> will look at your <code>composer.json</code> file again and resolve the latest versions of all the package requirements, install them to your <code>vendor</code> folder and overwrite your <code>composer.lock</code> file. If you've removed any package dependencies from your <code>composer.json</code> it will uninstall them.</p> <p>One last thing: <code>composer upgrade</code> is just an alias for <code>composer update</code>, so you don't need to worry about it if you know <code>composer update</code>.</p> <h2 id="_2-never-run-composer-as-sudo-root"><a href="#_2-never-run-composer-as-sudo-root" class="header-anchor">#</a> 2. Never run Composer as sudo/root</h2> <p>Some composer packages contains scripts that Composer will run, and if you run Composer as sudo these scripts can do anything that you can do as a sudo user. Scary stuff!</p> <p>Even though Composer shows a warning when you try to run composer as root and has a dedicated FAQ <a href="https://getcomposer.org/doc/faqs/how-to-install-untrusted-packages-safely.md" target="_blank" rel="noopener noreferrer">page<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> about it, many people (including my former self!) run composer as root. Unfortunately that FAQ page doesn't tell noobs like me how to <em>not</em> run it as root, but luckily there's <a href="https://snipe.net/2017/11/15/so-you-ran-composer-as-root/" target="_blank" rel="noopener noreferrer">this<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> really great blog post on how stop running Composer as root.</p> <h2 id="_3-packagist-is-a-better-place-to-find-packages-than-google"><a href="#_3-packagist-is-a-better-place-to-find-packages-than-google" class="header-anchor">#</a> 3. <a href="https://packagist.org/" target="_blank" rel="noopener noreferrer">Packagist<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is a better place to find packages than Google</h2> <p>I used to use Google to find php packages for my projects, but once I found Packagist, I never looked back. <a href="https://packagist.org/" target="_blank" rel="noopener noreferrer">Packagist<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is the main repository for Composer packages and unless you're using internal company packages, all of your Composer packages would probably be downloaded from Packagist (even if you don't know about it!). Packagist's search functionality isn't half bad and using it to find packages is much more effective than using an ordinary search engine.</p> <p>Simply search for keywords and Packagist will show you matching packages. The search listings make it easy for you to see how many times each package has been installed. Clicking on a search result takes you to the package's page where you can see it's dependencies, README file, available releases and link to it's source repository.</p> <h2 id="_4-never-modify-anything-inside-the-vendor-folder"><a href="#_4-never-modify-anything-inside-the-vendor-folder" class="header-anchor">#</a> 4. Never modify anything inside the <code>vendor</code> folder</h2> <p>If you edit anything in your <code>vendor</code> directory your edits will be overwritten the next time you run <code>composer update</code>. If you want modify a package (which I highly encourage for learning and contributing purposes!) rather create a fork of the package's repository and make your changes on a new branch. To find the package's repository, simply type <code>composer home vendor/package-name</code> in your console. You can add your forked repository as a <a href="https://getcomposer.org/doc/05-repositories.md#repository" target="_blank" rel="noopener noreferrer">&quot;repository&quot;<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> in your <code>composer.json</code> file and you can use your branch as the package's version requirement. That way your team mates can also use your modified version of the package. To install your package, simply run <code>composer update</code>.</p> <p>If you later create a pull request from your branch to the package's main repository and it gets merged, you can simply change the version requirement for the package in your <code>composer.json</code> file back to the package's latest version. Have a look at this <a href="https://stackoverflow.com/questions/55294339/composer-require-a-specific-pull-request/55307273#55307273" target="_blank" rel="noopener noreferrer">StackOverflow question<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for an example of a scenario like this.</p> <h2 id="_5-you-should-almost-always-run-composer-install-after-changing-to-another-branch-or-pulling-from-a-remote-branch"><a href="#_5-you-should-almost-always-run-composer-install-after-changing-to-another-branch-or-pulling-from-a-remote-branch" class="header-anchor">#</a> 5. You should (almost) always run <code>composer install</code> after changing to another branch or pulling from a remote branch</h2> <p>When you switch branches or pull from a remote branch there's a chance that the <code>composer.lock</code> file your getting is different from the one you had before. To ensure that your environment is in the same state that the environment on which the commit you checked out was tested on, you need to run <code>composer install</code>. Luckily <a href="https://githooks.com/" target="_blank" rel="noopener noreferrer">git hooks<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> can do that for us automatically whenever the <code>composer.lock</code> file has changed.</p> <p>To check for changes to the <code>composer.lock</code> file and run <code>composer install</code> when you switch branches, simply copy and paste the following code (that I modified from this <a href="https://gist.github.com/sindresorhus/7996717" target="_blank" rel="noopener noreferrer">gist<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>) to a new file called <code>post-merge</code> in your <code>.git/hooks</code> directory in your project:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token assign-left variable">changed_files</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">git</span> diff-tree -r --name-only --no-commit-id ORIG_HEAD HEAD<span class="token variable">)</span></span>&quot;</span>

<span class="token function-name function">check_run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$changed_files</span>&quot;</span> <span class="token operator">|</span> <span class="token function">grep</span> -E --quiet <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">eval</span> <span class="token string">&quot;<span class="token variable">$2</span>&quot;</span>
<span class="token punctuation">}</span>

check_run composer.lock <span class="token string">'printf &quot;<span class="token entity" title="\n">\n</span>Running composer install...<span class="token entity" title="\n">\n</span><span class="token entity" title="\n">\n</span>&quot; &amp;&amp; composer install'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Then run <code>chmod +x .git/hooks/post-merge</code> to make the file executable.</p> <p>You can copy the following code to <code>.git/hooks/post-checkout</code> and make it executable:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token assign-left variable">changed_files</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">git</span> diff-tree -r --name-only --no-commit-id $1 $2<span class="token variable">)</span></span>&quot;</span>

<span class="token function-name function">check_run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$changed_files</span>&quot;</span> <span class="token operator">|</span> <span class="token function">grep</span> -E --quiet <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">eval</span> <span class="token string">&quot;<span class="token variable">$2</span>&quot;</span>
<span class="token punctuation">}</span>

check_run composer.lock <span class="token string">'printf &quot;<span class="token entity" title="\n">\n</span>Running composer install...<span class="token entity" title="\n">\n</span><span class="token entity" title="\n">\n</span>&quot; &amp;&amp; composer install'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_6-always-commit-your-composer-lock-file"><a href="#_6-always-commit-your-composer-lock-file" class="header-anchor">#</a> 6. Always commit your <code>composer.lock</code> file</h2> <p>Often when your <code>composer.lock</code> file has changed it means that you're using a new package that your code now relies on. If you don't commit your <code>composer.lock</code> file your code might break on your team mates' environments!</p> <h2 id="_7-composer-require-might-not-always-be-your-friend"><a href="#_7-composer-require-might-not-always-be-your-friend" class="header-anchor">#</a> 7. <code>composer require</code> might not always be your friend</h2> <p><code>composer require vendor/package</code> can be handy when you have to add and install a new dependency to your package. It removes the need for you to manually update your <code>composer.json</code> file and to then run <code>composer update</code>. It even allows you to add multiple packages at once with <code>composer require vendor1/package1 vendor2/package2 etc.</code>. However, sometimes it will tell you that there aren't an available set of packages available when in fact there is.</p> <p>It isn't exactly Composer's fault that it tells you this, because if you don't specify a version constraint for the package (using <code>composer require vendor/package:version-constraint</code>) it assumes your want the latest minor version. But sometimes the latest versions aren't what you need and a noob like me didn't know that Composer won't be able to figure that out itself.</p> <p>Let's have a look at <a href="https://stackoverflow.com/questions/55265988/composer-cant-seem-to-get-requirements-right/55307628?noredirect=1#comment97344874_55307628" target="_blank" rel="noopener noreferrer">this<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> question on StackOverflow. The OP wanted to install the <code>mailgun/mailgun-php</code>, <code>php-http/curl-client</code> and <code>guzzlehttp/psr7</code> packages. While there were a set of mutually compatible versions of the packages available (<code>mailgun/mailgun-php:2.8.1</code>, <code>php-http/curl-client:v1.7.1</code> and <code>guzzlehttp/psr7:1.5.2</code>), <code>composer require</code> failed and told him &quot;Your requirements could not be resolved to an installable set of packages.&quot; <code>composer require</code> tried to install the latest minor versions of each of the packages which was <code>mailgun/mailgun-php:^2.8</code>, <code>php-http/curl-client:^2.0</code> and <code>guzzlehttp/psr7:^1.5</code>.</p> <p>Luckily he didn't have to go and manually find a compatible set of dependencies himself. He could specify the lowest versions he'd want like this <code>composer require mailgun/mailgun-php:&quot;&gt;0&quot; php-http/curl-client:&quot;&gt;0&quot; guzzlehttp/psr7:&quot;&gt;0&quot;</code> and Composer would find the latest set of versions that would satisfy all of the dependencies.</p> <h2 id="_8-keep-the-composer-versions-documentation-close-by-to-refresh-your-understanding-of-package-version-constraints"><a href="#_8-keep-the-composer-versions-documentation-close-by-to-refresh-your-understanding-of-package-version-constraints" class="header-anchor">#</a> 8. Keep the Composer versions <a href="https://getcomposer.org/doc/articles/versions.md" target="_blank" rel="noopener noreferrer">documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> close by to refresh your understanding of package version constraints</h2> <p>This Composer documentation on versions and constraints is very thorough and useful. The two operators that you will often see in <code>composer.json</code> files, but which aren't very obvious to the untrained eye, is <code>~</code> (<a href="https://getcomposer.org/doc/articles/versions.md#tilde-version-range-" target="_blank" rel="noopener noreferrer">The tilde version range<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>) and <code>^</code> (<a href="https://getcomposer.org/doc/articles/versions.md#caret-version-range-" target="_blank" rel="noopener noreferrer">the caret version range<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>).</p> <p>The <code>^</code> specifies a range where the minimum version is the version specified and the highest allowed version if the next breaking update (in <a href="https://semver.org/" target="_blank" rel="noopener noreferrer">semantic versioning<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> terms). For example <code>^2.1</code> allows versions <code>&gt;=2.1</code> up to <code>&lt;3.0.0</code>, and <code>^1.1.1</code> allows versions up to <code>&lt;2.0.0</code>.</p> <p>The <code>~</code> operator is similar, but it basically looks at the last specified digit in the version and allows only it to go up, but not the digits before it. For example <code>~1.2</code> can go up to anything below <code>2.0.0</code>, but <code>~1.1.2</code> can only go up to anything below <code>1.2</code>.</p> <h2 id="_9-lastly-run-composer-self-update-once-in-a-while"><a href="#_9-lastly-run-composer-self-update-once-in-a-while" class="header-anchor">#</a> 9. Lastly, run <code>composer self-update</code> once in a while</h2> <p><code>composer self-update</code> is a handy command that updates your Composer installation itself and allows you to use the newest, shiniest version of Composer.</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">8/27/2020, 11:46:25 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.7a72154f.js" defer></script><script src="/assets/js/3.f60f5d55.js" defer></script><script src="/assets/js/1.882304ba.js" defer></script><script src="/assets/js/18.51b8d96c.js" defer></script><script src="/assets/js/8.dc2fa637.js" defer></script>
  </body>
</html>
